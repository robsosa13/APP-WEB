<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Dandelion Business CLinic</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">
  <!-- Favicons -->
  <link href="assets/img/logo.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">
  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
</head>

<body ng-app="dateDiff">
  <header id="header" class="fixed-top header-inner-pages">
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-xl-9 d-flex align-items-center justify-content-between">
          <a href="index.html" class="logo"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>
          <h1 class="logo"><a href="index.html">Dandelion</a></h1>
          <nav class="nav-menu d-none d-lg-block">
            <ul>
              <li class="active"><a href="index.html">Inicio</a></li>`
              <li class="drop-down"><a href="">Nosotros</a>
                <ul>
                  <li><a href="about.html">¿Quienes Somos?</a></li>
                  <li><a href="history.html">Historia </a></li>
                </ul>
              </li>
              <li class="drop-down"><a href="">Servicios</a>
                <ul>
                  <li><a href="company.html">Empresas</a></li>
                  <li><a href="person.html">Personas Naturales </a></li>
                </ul>
              </li>
              <li><a href="#clients">Clientes</a></li>
              <!-- <li><a href="contact.html">Contáctanos</a></li> -->
              <li><a href="date.html">Finiquito Express</a></li>
              <!-- <form class="form-inline d-flex justify-content-center md-form form-sm mt-0">
                <i class="fa fa-search" aria-hidden="true"></i>
                <input class="form-control form-control-sm ml-3 w-75" type="text" placeholder="Buscar"
                  aria-label="Search">
              </form> -->
            </ul>
          </nav><!-- .nav-menu -->
          <a href="contact.html" class="get-started-btn scrollto">Contáctanos</a>
        </div>
      </div>
    </div>
  </header><!-- End Header -->
  <main id="main">
    <!-- ======= Contact Section ======= -->
    <section>
      <div class="container">
        <div class="">
          <strong>
            <h1>Finiquito Express</h1>
          </strong>
          <p> </p>
          <p>Para verificar su Finiquito primero ingrese la fecha de Inicio y Fin de su trabajo, luego haga Click para
            verificar. </p>
        </div>
      </div>
      <div class="container" ng-controller="index as vm">
        <div class="col-lg-12 mt-5 mt-lg-0">
          <div class="form-group row">
            <label for="example-date-input" class="col-3 col-form-label">Fecha Inicio y Fin :</label>
            <div class="col-3">
              <input class="form-control" type="date" ng-model="vm.startDate" />
            </div>
            <div class="col-3">
              <input id="fechaF" class="form-control" type="date" ng-model="vm.endDate" />
            </div>
            <div class="col-3">
              <button class="btn btn-primary bg-dark" ng-click="vm.getDiff()">Verifica</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label"> </label>
            <label for="example-text-input" class="col-1 col-form-label"> Años</label>
            <label for="example-text-input" class="col-1 col-form-label"> Meses</label>
            <label for="example-text-input" class="col-1 col-form-label"> Días</label>
            <!-- <span class="col-4 col-form-label"></span> <span
              id=""></span>Días -->
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label"> Tiempo trabajado :</label>
            <div class="col-1">
              <input class="anioF form-control" onkeyup="" placeholder="" value="{{vm.result.years}}" type="text"
                disabled>
            </div>
            <div class="col-1">
              <input class="mesF form-control" onkeyup="" placeholder="" value="{{vm.result.months}}" type="text"
                disabled>
            </div>
            <div class="col-1">
              <input class="dayF form-control" onkeyup="" placeholder="" value="{{vm.result.days}}" type="text"
                disabled>
            </div>
            <label for="example-date-input" class="col-4 col-form-label">Días de vacación que le corresponde : </label>
            <label for="example-date-input" class="col-1 col-form-label" id="dVaca">0 </label>
            <label for="example-date-input" class="col-1 col-form-label">(Días) </label>
            <!-- <span class="col-4 col-form-label"></span> <span
              id=""></span>Días -->
          </div>

          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label">Ingrese sus 3 últimos salarios :</label>
            <div class="col-3">
              <input class="monto form-control" onkeyup="sumar();" placeholder="Antepenúltimo Salario" type="text"
                value="" id="txt1">
            </div>
            <div class="col-3">
              <input class="monto form-control" onkeyup="sumar();" placeholder="Penúltimo Salario" type="text" value=""
                id="txt2">
            </div>
            <div class="col-3">
              <input class="monto form-control" onkeyup="sumar();" placeholder="Último Salario" type="text" value=""
                id="txt3">
            </div>
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label">Sueldo Promedio :</label>
            <div class="col-3">
              <input id="spTotal" class="form-control" type="text" disabled>
            </div>
            <div class="col-3">
              <!-- <input type="checkbox" id="checkbox" name="checkbox" value="" checked>
              <label for="checkbox"> Desahucio</label><br> -->
            </div>
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label">Ingrese sus 3 últimos bonos :</label>
            <div class="col-3">
              <input class="form-control" onkeyup="" placeholder="Antepenúltimo Bono" type="text"
                value="" id="txt1">
            </div>
            <div class="col-3">
              <input class="form-control" onkeyup="" placeholder="Penúltimo Bono" type="text" value=""
                id="txt2">
            </div>
            <div class="col-3">
              <input class="form-control" onkeyup="" placeholder="Último Bono" type="text" value=""
                id="txt3">
            </div>
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label">Bonos Promedio (Bs.) :</label>
            <div class="col-3">
              <input class="bonoA form-control" type="text"disabled>
            </div>
            <!-- <div class="col-3">
              <label><input type="checkbox" value="FootballSS" name="sport"> Football</label>
            </div> -->
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label">Dias de Vacación que no tomó :</label>
            <div class="col-1">
              <input class="diaV form-control" onkeyup="total();" type="text">
            </div>
          </div>
          <div class="form-group row">
            <label for="example-text-input" class="col-3 col-form-label"></label>
            <!-- <div class="col-3"> -->
            <strong><span class="col-3 col-form-label"> Total Finiquito : </span> </strong>
            <!-- </div> -->
            <div class="col-3">
              <strong><span id="finiquito"></span> (Bs.)
              </strong>
            </div>
          </div>
          <!-- MODAL -->

          <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Consultar días de vacacion</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <strong><label for="example-date-input" class="col-12 col-form-label">Fecha Inicio y Fin
                    </label></strong>
                  <div class="form-group row">
                    <div class="col-6">
                      <input class="form-control" type="date" ng-model="vm.startDate" />
                    </div>
                    <div class="col-6">
                      <input id="fechaF" class="form-control" type="date" ng-model="vm.endDate" />
                    </div>
                    <!-- <div class="col-5">
                      <button class="btn btn-primary bg-dark" ng-click="vm.getDiff()">Verifica</button>
                    </div> -->
                  </div>
                  <!-- <form> -->
                  <div class="form-group">
                    <label for="recipient-name" class="col-12 -form-label">Le corresponde:</label>
                    <input type="text" class="form-control" id="recipient-name">
                  </div>
                  <!-- <div class="form-group">
                      <label for="message-text" class="col-form-label">Message:</label>
                      <textarea class="form-control" id="message-text"></textarea>
                    </div> -->
                  <!-- </form> -->
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary bg-dark">Consultar</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>

                </div>
              </div>
            </div>
          </div>
          <!-- END MODAL -->
          <!-- <p>
            {{vm.result.years}}
            {{vm.result.months}}
            {{vm.result.days}}
          </p> -->
        </div>
      </div>
    </section>
  </main><!-- End #main -->
  <!-- Section Scripts  -->
  <footer id="footer">
    <div class="container">
      <a><img src="assets/img/marca.png" alt="" class="img-fluid" width="40%" height="40%"></a>
      <p>Encuentranos tambien en nuestras redes sociales</p>
      <div class="social-links">
        <!-- <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a> -->
        <a href="https://www.facebook.com/dandelionbc/" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="https://www.instagram.com/dandelion.business.clinic/" class="instagram"><i
            class="bx bxl-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        <a href="https://wa.link/vm0fsf" class="google-plus"><i class="bx bxl-whatsapp"></i></a>
      </div>
    </div>
  </footer>
  <!-- End Footer -->
  <!-- <div id="preloader"></div>
  <a href="#" class="back-to-top"><i class="ri-arrow-up-line"></i></a> -->
  <!-- Vendor JS Files -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="assets/vendor/counterup/counterup.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <!-- Angular  -->
  <script data-require="angular.js@1.5.0" data-semver="1.5.0"
    src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script>
  <script data-require="moment.js@2.10.2" data-semver="2.10.2"
    src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
  <!-- end Angular -->
  <script>
    angular.module('dateDiff', []);
    angular.module('dateDiff').value('moment', moment);
    angular.module('dateDiff').controller("index", index);
    index.$inject = ['moment'];
    function total() {
      document.getElementById('spTotal').value = prome;
    }
    function total() {

      var total = 0;
      var tot1 = 0;
      var tot2 = 0;
      var tot3 = 0;
      var promM = 0;
      var promA = 0;
      var promD = 0;
      var promV = 0;
      var sueldo = 0;
      var totalV = 0;
      var duo = 0;
      var duodecimas = 0;
      var bonos = 0;

      $(".anioF").each(function () {

        if (isNaN(parseFloat($(this).val()))) {

          tot1 += 0;
        } else {
          tot1 += parseFloat($(this).val());
        }
      });
      $(".mesF").each(function () {

        if (isNaN(parseFloat($(this).val()))) {

          tot2 += 0;
        } else {
          tot2 += parseFloat($(this).val());
        }
      });

      $(".dayF").each(function () {

        if (isNaN(parseFloat($(this).val()))) {

          tot3 += 0;
        } else {
          tot3 += parseFloat($(this).val());
        }
      });

      $("#spTotal").each(function () {

        if (isNaN(parseFloat($(this).val()))) {

          sueldo += 0;
        } else {
          sueldo += parseFloat($(this).val());
        }
      });
      $(".diaV").each(function () {
        if (isNaN(parseFloat($(this).val()))) {

          totalV += 0;
        } else {
          totalV += parseFloat($(this).val());
        }
      });
      $(".bonoA").each(function () {
        if (isNaN(parseFloat($(this).val()))) {

          bonos += 0;
        } else {
          bonos += parseFloat($(this).val());
        }
      });

      // $(document).ready(function() {
      //       $("#myId").click(function(){
      //           var favorite = [];
      //           $.each($("input[name='sport']:checked"), function(){            
      //               favorite.push($(this).val());
      //           });
      //           alert("My favourite sports are: " + favorite.join(", "));
      //       });
      //   });
      promA = sueldo * tot1;//Anio
      promM = sueldo / 12;//Mes
      promD = promM / 30;//Dia
      //promV = promM / 30;//Vacacion
      var deshaucio;
      var dale = 'test';

      // $('input[type="checkbox"]').click(function(){
      //     if($(this).is(":checked")){
      //        deshaucio=sueldo*3;
      //        dale = 'hola';
      //         console.log("Checkbox is checked.",deshaucio);
      //     }
      // });

      // console.log("sale",deshaucio);
      // console.log("sale",dale);

      var sVacacion = 0;
      var diaDuo = 0;
      var totalduo = 0;
      var sMes = 0;
      var sDia = 0;
      var date = new Date($('#fechaF').val());
      var mesDuo = date.getMonth();
      //var date = new Date($('#fechaF').val());
      var diaDuodd = date.getDate() + 1;
      var duoDiaDuo = 0;
      //console.log('Meses para aguinaldo :', mesDuo);
      sMes = promM * tot2;
      sDia = promD * tot3;
      console.log('diaDuo :', diaDuodd);
      console.log('mes :', mesDuo);

      if (mesDuo > 3) {

        duo = (sueldo / 12) * mesDuo;
        diaDuo = promD * diaDuodd;

        duodecimas = duo + diaDuo;
      }
      else {
        duodecimas = 0;
      }
      //vacacion
      sVacacion = (sueldo / 30) * totalV;
      console.log('sueldo por anio:', promA);
      console.log('sueldo por mes :', sMes);
      console.log('sueldo por dia :', sDia);
      console.log('sueldo por vacacion :', sVacacion);
      console.log('sueldo por duodecimas :', duodecimas);
      // console.log("Desahucio",deshaucio);
      total = promA + sDia + sVacacion + sMes + duodecimas + bonos;
      console.log('Finiquito :', total);

      document.getElementById('finiquito').innerHTML = total;
    }
    function sumar() {
      var total = 0;
      var prome = 0;
      var anio = 0;
      $(".monto").each(function () {

        if (isNaN(parseFloat($(this).val()))) {

          total += 0;
        } else {
          total += parseFloat($(this).val());
          prome = total / 3;
        }
      });
      $(".anioF").each(function () {

        if (isNaN(parseFloat($(this).val()))) {

          anio += 0;
        } else {
          anio += parseFloat($(this).val());

        }
      });
      if (anio >= 1 && anio <= 4) {
        dVacacion = 15;

      }
      if (anio >= 5 && anio <= 9) {
        dVacacion = 20;

      }
      if (anio >= 10) {
        dVacacion = 30;
      }


      document.getElementById('spTotal').value = prome;
      document.getElementById('dVaca').innerHTML = dVacacion;
      // $("#fechaF").datepicker().on('changeMonth', function (e) {
      //   var currMonth = new Date(e.date).getMonth() + 1;
      // });

    }

    function index(moment) {
      var vm = {
        startDate: undefined,
        endDate: undefined,
        result: {},
        getDiff: getDiff
      }
      init();
      return vm;

      function init() { }

      function getDiff() {
        var diff = dateDiff(vm.startDate, vm.endDate);

        if (diff !== undefined) {
          angular.extend(vm.result, diff)
        }
        else {
          alert('invalid start or end date');
        }
      }
      function dateDiff(startdate, enddate) {
        //define moments for the startdate and enddate
        var startdateMoment = moment(startdate);
        var enddateMoment = moment(enddate);

        if (startdateMoment.isValid() === true && enddateMoment.isValid() === true) {
          //getting the difference in years
          var years = enddateMoment.diff(startdateMoment, 'years');

          //moment returns the total months between the two dates, subtracting the years
          var months = enddateMoment.diff(startdateMoment, 'months') - (years * 12);

          //to calculate the days, first get the previous month and then subtract it
          startdateMoment.add(years, 'years').add(months, 'months');
          var days = enddateMoment.diff(startdateMoment, 'days');
          return {
            years: years,
            months: months,
            days: days + 1
          };
        }
        else {
          return undefined;
        }
      }
    }
  </script>
  <!-- End Section Scripts -->
</body>

</html>